!function(){"use strict";const e={inputSelector:".modal__form-input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__form-button_inactive",inputErrorClass:"modal__form-input_error",errorClass:"modal__error_visible"},t=document.querySelector(".cards__list"),i=document.querySelector("#profile-edit-button"),s=document.querySelector("#modal-profile-form"),r=document.querySelector("#modal-edit-title-input"),n=document.querySelector("#modal-edit-subtitle-input"),o=(document.querySelector(".profile__image"),document.querySelector(".profile__edit-avatar")),a=document.querySelector("#avatar-form"),l=document.querySelector("#modal-add-card"),h=document.querySelector("#modal-add-card-form"),d=document.querySelector("#profile-add-card-button");class u{constructor(e,t){var i,s,r;i=this,r=()=>this._inputList.every((e=>e.validity.valid)),(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(s="_checkFormValidity"))in i?Object.defineProperty(i,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[s]=r,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtonState()}))})),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this.setEventListeners()}}function c(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m{constructor(e,t,i,s,r,n){c(this,"removeCard",(()=>{this._element.remove(),this._element=null})),c(this,"updateLikes",(e=>{this._likes=e,this.renderLikes()})),this._name=e.name,this._link=e.link,this._likes=e.likes,this._cardId=e._id,this._userId=t,this._ownerId=e.owner._id,this._handleImageClick=s,this._handleLikeClick=r,this._handleDelClick=n,this._cardSelector=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}setEventListeners(){this._cardImg.addEventListener("click",(()=>this._handlePreview())),this._cardDelBtn.addEventListener("click",(()=>this._handleDelClick(this._cardId))),this._likeBtn.addEventListener("click",(()=>this._handleLikeClick(this._cardId,this._isLiked())))}_handlePreview(){this._handleImageClick(this._name,this._link)}_isLiked(){return this._likes.some((e=>e._id===this._userId))}renderLikes(){this._cardCounter.textContent=this._likes.length,this._isLiked()?this._likeBtn.classList.add("card__like-button_active"):this._likeBtn.classList.remove("card__like-button_active")}renderCard(){this._element=this._getTemplate(),this._likeBtn=this._element.querySelector(".card__like-button"),this._cardImg=this._element.querySelector(".card__image"),this._cardDelBtn=this._element.querySelector(".card__delete-button"),this._cardCounter=this._element.querySelector(".card__like-counter");const e=this._element.querySelector(".card__title");return this._cardImg.src=this._link,this._cardImg.alt=`Photo of ${this._name}`,e.textContent=this._name,this.renderLikes(),this._userId!==this._ownerId&&this._cardDelBtn.remove(),this.setEventListeners(),this._element}}class _{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this.open=this.open.bind(this),this.close=this.close.bind(this),this._closeBtn=this._popupElement.querySelector(".modal__close"),this._openEditAvatar=document.querySelector(".profile__edit-avatar"),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlay=this._handleOverlay.bind(this)}open(){this._popupElement.classList.add("modal_opened"),this.setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this.removeEventListeners()}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlay(e){e.target.classList.contains("modal_opened")&&this.close()}setEventListeners(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleOverlay),this._closeBtn.addEventListener("click",this.close)}removeEventListeners(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleOverlay),this._closeBtn.removeEventListener("click",this.close)}}function p(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class v extends _{constructor(e,t){let{handleFormSubmit:i,loadingButtonText:s}=t;var r,n,o;super({popupSelector:e}),r=this,o=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="_handleSubmit"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._popupForm=this._popupElement.querySelector(".modal__form"),this._formInputs=this._popupForm.querySelectorAll(".modal__form-input"),this._submitBtn=this._popupElement.querySelector(".modal__form-button"),this._buttonText=this._submitBtn.textContent,this._handleFormSubmit=i,this._loadingButtonText=s}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}showLoading(){this._submitBtn.textContent=this._loadingButtonText}hideLoading(){this._submitBtn.textContent=this._buttonText}close(){this._popupForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleSubmit)}removeEventListeners(){super.removeEventListeners(),this._popupForm.removeEventListener("submit",this._handleSubmit)}}class b{constructor(e,t){let{items:i,renderer:s}=e;this._items=i,this._renderer=s,this._itemsList=t}renderItems(){this._items.forEach(this._renderer)}addItem(e){const t=this._renderer(e);this._itemsList.prepend(t)}}const f=new class{constructor(e){let{baseUrl:t,headers:i}=e;this._baseUrl=t,this._headers=i}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}updateProfileInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}addNewCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}getLikes(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}addLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"2fee5a13-ea32-4770-a359-bbaf2b3da470","Content-Type":"application/json"}});let E,S;function y(e){const i=new m(e,E,"#card-template",((e,t)=>{w.open(e,t)}),((e,t)=>{t?f.removeLikes(e).then((e=>{i.updateLikes(e.likes)})).catch((e=>{console.log(e)})):f.addLikes(e).then((e=>{i.updateLikes(e.likes)})).catch((e=>{console.log(e)}))}),(e=>{C.setSubmitAction((()=>(C.showLoading(),f.deleteCard(e).then((()=>{i.removeCard(),C.close()})).catch((e=>{console.log(e)})).finally((()=>{C.hideLoading()}))))),C.open()}));t.prepend(i.renderCard())}f.getAppInfo().then((e=>{let[i,s]=e;E=s._id,B.setUserInfo(s),B.setAvatar(s),S=new b({items:i,renderer:y},t),S.renderItems()})).catch((e=>{console.log(e)}));const g=new v("#avatar-form",{handleFormSubmit:function(e){let{avatar:t}=e;return g.showLoading(),f.updateAvatar(t).then((e=>{B.setAvatar({avatar:e.avatar})})).then((()=>{this.close()})).catch((e=>{console.log(e)})).finally((()=>{g.hideLoading()}))},loadingButtonText:"Saving..."}),L=new v("#modal-edit-profile",{handleFormSubmit:function(e){return L.showLoading(),f.updateProfileInfo(e.title,e.subtitle).then((()=>{B.setUserInfo({name:e.title,about:e.subtitle}),L.close()})).catch((e=>{console.log(e)})).finally((()=>{L.hideLoading()}))},loadingButtonText:"Saving..."}),k=new v("#modal-add-card",{handleFormSubmit:function(e){let{name:t,link:i}=e;return k.showLoading(),f.addNewCard(t,i).then((e=>{y(e)})).then((()=>{this.close()})).catch((e=>{console.log(e)})).finally((()=>{k.hideLoading()}))},loadingButtonText:"Saving..."}),C=new class extends _{constructor(e,t){super({popupSelector:e}),p(this,"setSubmitAction",(e=>{this._handleSubmitCallback=e})),p(this,"_handleSubmit",(e=>{e.preventDefault(),this._handleSubmitCallback()})),this._loadingButtonText=t,this._submitBtn=this._popupElement.querySelector(".modal__form-button"),this._buttonText=this._submitBtn.textContent}setEventListeners(){super.setEventListeners(),this._popupElement.querySelector("#confirm-del-form").addEventListener("submit",this._handleSubmit)}removeEventListeners(){super.removeEventListeners(),this._popupElement.removeEventListener("submit",this._handleSubmit)}showLoading(){this._submitBtn.textContent=this._loadingButtonText}hideLoading(){this._submitBtn.textContent=this._buttonText}}("#confirm-del-modal","Saving..."),w=new class extends _{open(e,t){const i=this._popupElement.querySelector(".modalPreview__image"),s=this._popupElement.querySelector(".modalPreview__title");i.src=t,s.textContent=e,i.alt=`Photo of ${e}`,super.open()}}({popupSelector:"#modal-preview"}),B=new class{constructor(e){let{nameSelector:t,aboutSelector:i,avatarSelector:s}=e;this._nameElement=document.querySelector(t),this._aboutElement=document.querySelector(i),this._avatarElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent}}getAvatar(){return{avatar:this._avatarElement.src}}setAvatar(e){let{avatar:t}=e;this._avatarElement.src=t}setUserInfo(e){let{name:t,about:i}=e;this._nameElement.textContent=t,this._aboutElement.textContent=i}}({nameSelector:"#profile-title",aboutSelector:"#profile-subtitle",avatarSelector:".profile__image"}),I=new u(e,s),q=new u(e,h),x=new u(e,a);I.enableValidation(),q.enableValidation(),x.enableValidation(),i.addEventListener("click",(()=>{!function(){const{name:e,about:t}=B.getUserInfo();r.value=e,n.value=t,L.open()}()})),d.addEventListener("click",(()=>{k.open(l)})),o.addEventListener("click",(()=>{g.open("#avatar-form")}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SzhMLGVBQWlCN00sU0FBU0MsY0FBY3lNLEVBQy9DLENBRUF0RCxjQUNFLE1BQU8sQ0FDTHJGLEtBQU1oRCxLQUFLNEwsYUFBYTlKLFlBQ3hCNEcsTUFBTzFJLEtBQUs2TCxjQUFjL0osWUFFOUIsQ0FFQWlLLFlBQ0UsTUFBTyxDQUNMaEQsT0FBUS9JLEtBQUs4TCxlQUFlcEgsSUFFaEMsQ0FFQWtHLFVBQVNRLEdBQWEsSUFBWixPQUFFckMsR0FBUXFDLEVBQ2xCcEwsS0FBSzhMLGVBQWVwSCxJQUFNcUUsQ0FDNUIsQ0FFQTRCLFlBQVdJLEdBQWtCLElBQWpCLEtBQUUvSCxFQUFJLE1BQUUwRixHQUFPcUMsRUFDekIvSyxLQUFLNEwsYUFBYTlKLFlBQWNrQixFQUNoQ2hELEtBQUs2TCxjQUFjL0osWUFBYzRHLENBQ25DLEdKOEo0QixDQUM1QitDLGFBQWMsaUJBQ2RDLGNBQWUsb0JBQ2ZDLGVBQWdCLG9CQUlaSyxFQUFvQixJQUFJcE0sRUFDNUJsQixFQUNBVSxHQUVJNk0sRUFBbUIsSUFBSXJNLEVBQzNCbEIsRUFDQWdCLEdBRUl3TSxFQUFzQixJQUFJdE0sRUFDOUJsQixFQUNBYyxHQUdGd00sRUFBa0JoSyxtQkFDbEJpSyxFQUFpQmpLLG1CQUNqQmtLLEVBQW9CbEssbUJBR3BCN0MsRUFBa0I0QixpQkFBaUIsU0FBUyxNQXJHNUMsV0FDRSxNQUFNLEtBQUVpQyxFQUFJLE1BQUUwRixHQUFVZ0MsRUFBU3JDLGNBQ2pDaEosRUFBWW1ILE1BQVF4RCxFQUNwQjFELEVBQW1Ca0gsTUFBUWtDLEVBQzNCc0MsRUFBY2hHLE1BQ2hCLENBaUdFbUgsRUFBcUIsSUFHdkJ4TSxFQUFnQm9CLGlCQUFpQixTQUFTLEtBQ3hDb0ssRUFBYW5HLEtBQUt2RixFQUFhLElBR2pDRixFQUFld0IsaUJBQWlCLFNBQVMsS0FDdkMrSixFQUFXOUYsS0FBSyxlQUFlLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9hcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2Zvcm0tYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0X2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBtb2RhbEVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtcHJvZmlsZS1mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZWRpdC10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1lZGl0LXN1YnRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuY29uc3Qgb3BlbkVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYXZhdGFyXCIpO1xyXG5jb25zdCBtb2RhbEVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1mb3JtXCIpO1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWFkZC1jYXJkXCIpO1xyXG5jb25zdCBtb2RhbEFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1hZGQtY2FyZC1mb3JtXCIpO1xyXG5jb25zdCBtb2RhbEFkZENhcmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWNhcmQtYnV0dG9uXCIpO1xyXG5cclxuZXhwb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGNhcmRMaXN0RWwsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgbW9kYWxFZGl0UHJvZmlsZUZvcm0sXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgYWRkQ2FyZE1vZGFsLFxyXG4gIG1vZGFsQWRkQ2FyZEZvcm0sXHJcbiAgbW9kYWxBZGRDYXJkQnRuLFxyXG4gIG9wZW5FZGl0QXZhdGFyLFxyXG4gIG1vZGFsRWRpdEF2YXRhcixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBjb25zdCBpc0Zvcm1WYWxpZCA9IHRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KCk7XHJcblxyXG4gICAgaWYgKCFpc0Zvcm1WYWxpZCkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jaGVja0Zvcm1WYWxpZGl0eSA9ICgpID0+XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIHVzZXJJZCxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsQ2xpY2sgPSBoYW5kbGVEZWxDbGljaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZVByZXZpZXcoKSk7XHJcbiAgICB0aGlzLl9jYXJkRGVsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxDbGljayh0aGlzLl9jYXJkSWQpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2NhcmRJZCwgdGhpcy5faXNMaWtlZCgpKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZVByZXZpZXcoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gIH1cclxuXHJcbiAgX2lzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaWtlcyA9IChsaWtlcykgPT4ge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMucmVuZGVyTGlrZXMoKTtcclxuICB9O1xyXG5cclxuICByZW5kZXJMaWtlcygpIHtcclxuICAgIHRoaXMuX2NhcmRDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkRGVsQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50ZXJcIik7XHJcbiAgICBjb25zdCBjYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltZy5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltZy5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5yZW5kZXJMaWtlcygpO1xyXG5cclxuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcclxuICAgICAgdGhpcy5fY2FyZERlbEJ0bi5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2Nsb3NlQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgdGhpcy5fb3BlbkVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYXZhdGFyXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlT3ZlcmxheSA9IHRoaXMuX2hhbmRsZU92ZXJsYXkuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVPdmVybGF5KGUpIHtcclxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5KTtcclxuICAgIHRoaXMuX2Nsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheSk7XHJcbiAgICB0aGlzLl9jbG9zZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGhhbmRsZUZvcm1TdWJtaXQsIGxvYWRpbmdCdXR0b25UZXh0IH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm0tYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fYnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fbG9hZGluZ0J1dHRvblRleHQgPSBsb2FkaW5nQnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICB9O1xyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2hvd0xvYWRpbmcoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nQnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIGhpZGVMb2FkaW5nKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGl0ZW1zTGlzdCkge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9pdGVtc0xpc3QgPSBpdGVtc0xpc3Q7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICBjb25zdCBuZXdJdGVtID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB0aGlzLl9pdGVtc0xpc3QucHJlcGVuZChuZXdJdGVtKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHtcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgY2FyZExpc3RFbCxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBtb2RhbEVkaXRQcm9maWxlRm9ybSxcclxuICBwcm9maWxlQXZhdGFyLFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcclxuICBhZGRDYXJkTW9kYWwsXHJcbiAgbW9kYWxBZGRDYXJkRm9ybSxcclxuICBtb2RhbEFkZENhcmRCdG4sXHJcbiAgb3BlbkVkaXRBdmF0YXIsXHJcbiAgbW9kYWxFZGl0QXZhdGFyLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvYXBpLmpzXCI7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjJmZWU1YTEzLWVhMzItNDc3MC1hMzU5LWJiYWYyYjNkYTQ3MFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5sZXQgY2FyZFNlY3Rpb247XHJcblxyXG5hcGlcclxuICAuZ2V0QXBwSW5mbygpXHJcbiAgLnRoZW4oKFtjYXJkc1Jlc3BvbnNlLCB1c2VyUmVzcG9uc2VdKSA9PiB7XHJcbiAgICB1c2VySWQgPSB1c2VyUmVzcG9uc2UuX2lkO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlclJlc3BvbnNlKTtcclxuICAgIHVzZXJJbmZvLnNldEF2YXRhcih1c2VyUmVzcG9uc2UpO1xyXG5cclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogY2FyZHNSZXNwb25zZSxcclxuICAgICAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICAgICAgfSxcclxuICAgICAgY2FyZExpc3RFbFxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfSk7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgdXNlcklkLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBoYW5kbGVJbWFnZUNMaWNrIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICAgIChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICAgIGltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcclxuICAgIH0sXHJcbiAgICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBoYW5kbGVMaWtlQ2xpY2sgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gICAgKGNhcmRJZCwgaXNMaWtlZCkgPT4ge1xyXG4gICAgICBpZiAoIWlzTGlrZWQpIHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5hZGRMaWtlcyhjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5yZW1vdmVMaWtlcyhjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGhhbmRsZURlbENsaWNrIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgICAoY2FyZElkKSA9PiB7XHJcbiAgICAgIGRlbFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgZGVsUG9wdXAuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICByZXR1cm4gYXBpXHJcbiAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZUNhcmQoKTtcclxuICAgICAgICAgICAgZGVsUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbFBvcHVwLmhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIGRlbFBvcHVwLm9wZW4oKTtcclxuICAgIH1cclxuICApO1xyXG4gIGNhcmRMaXN0RWwucHJlcGVuZChjYXJkRWxlbWVudC5yZW5kZXJDYXJkKCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuUHJvZmlsZUVkaXRGb3JtKCkge1xyXG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZU5hbWUudmFsdWUgPSBuYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbi52YWx1ZSA9IGFib3V0O1xyXG4gIGVkaXRGb3JtUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRFZGl0UHJvZmlsZShpbnB1dFZhbHVlcykge1xyXG4gIGVkaXRGb3JtUG9wdXAuc2hvd0xvYWRpbmcoKTtcclxuICByZXR1cm4gYXBpXHJcbiAgICAudXBkYXRlUHJvZmlsZUluZm8oaW5wdXRWYWx1ZXMudGl0bGUsIGlucHV0VmFsdWVzLnN1YnRpdGxlKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgbmFtZTogaW5wdXRWYWx1ZXMudGl0bGUsXHJcbiAgICAgICAgYWJvdXQ6IGlucHV0VmFsdWVzLnN1YnRpdGxlLFxyXG4gICAgICB9KTtcclxuICAgICAgZWRpdEZvcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdEZvcm1Qb3B1cC5oaWRlTG9hZGluZygpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdEFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICBhZGRGb3JtUG9wdXAuc2hvd0xvYWRpbmcoKTtcclxuICByZXR1cm4gYXBpXHJcbiAgICAuYWRkTmV3Q2FyZChuYW1lLCBsaW5rKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKHJlcywgY2FyZExpc3RFbCk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBhZGRGb3JtUG9wdXAuaGlkZUxvYWRpbmcoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gIGF2YXRhckZvcm0uc2hvd0xvYWRpbmcoKTtcclxuICByZXR1cm4gYXBpXHJcbiAgICAudXBkYXRlQXZhdGFyKGF2YXRhcilcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0QXZhdGFyKHsgYXZhdGFyOiByZXMuYXZhdGFyIH0pO1xyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYXZhdGFyRm9ybS5oaWRlTG9hZGluZygpO1xyXG4gICAgfSk7XHJcbn1cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUG9wdXAgSW5zdGFudGlhdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgYXZhdGFyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2F2YXRhci1mb3JtXCIsIHtcclxuICBoYW5kbGVGb3JtU3VibWl0OiBzdWJtaXRBdmF0YXIsXHJcbiAgbG9hZGluZ0J1dHRvblRleHQ6IFwiU2F2aW5nLi4uXCIsXHJcbn0pO1xyXG5jb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtZWRpdC1wcm9maWxlXCIsIHtcclxuICBoYW5kbGVGb3JtU3VibWl0OiBzdWJtaXRFZGl0UHJvZmlsZSxcclxuICBsb2FkaW5nQnV0dG9uVGV4dDogXCJTYXZpbmcuLi5cIixcclxufSk7XHJcbmNvbnN0IGFkZEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI21vZGFsLWFkZC1jYXJkXCIsIHtcclxuICBoYW5kbGVGb3JtU3VibWl0OiBzdWJtaXRBZGRDYXJkLFxyXG4gIGxvYWRpbmdCdXR0b25UZXh0OiBcIlNhdmluZy4uLlwiLFxyXG59KTtcclxuY29uc3QgZGVsUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcIiNjb25maXJtLWRlbC1tb2RhbFwiLCBcIlNhdmluZy4uLlwiKTtcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7IHBvcHVwU2VsZWN0b3I6IFwiI21vZGFsLXByZXZpZXdcIiB9KTtcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS10aXRsZVwiLFxyXG4gIGFib3V0U2VsZWN0b3I6IFwiI3Byb2ZpbGUtc3VidGl0bGVcIixcclxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxufSk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFZhbGlkYXRvcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBtb2RhbEVkaXRQcm9maWxlRm9ybVxyXG4pO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIG1vZGFsQWRkQ2FyZEZvcm1cclxuKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBtb2RhbEVkaXRBdmF0YXJcclxuKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gTGlzdGVuZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuUHJvZmlsZUVkaXRGb3JtKCk7XHJcbn0pO1xyXG5cclxubW9kYWxBZGRDYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVBvcHVwLm9wZW4oYWRkQ2FyZE1vZGFsKTtcclxufSk7XHJcblxyXG5vcGVuRWRpdEF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckZvcm0ub3BlbihcIiNhdmF0YXItZm9ybVwiKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZUluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldExpa2VzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZXMoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZXMoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgbG9hZGluZ0J1dHRvblRleHQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2xvYWRpbmdCdXR0b25UZXh0ID0gbG9hZGluZ0J1dHRvblRleHQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9idXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uID0gKGFjdGlvbikgPT4ge1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2sgPSBhY3Rpb247XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZVN1Ym1pdCA9IChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjaygpO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbC1mb3JtXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gIH1cclxuXHJcbiAgc2hvd0xvYWRpbmcoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9sb2FkaW5nQnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIGhpZGVMb2FkaW5nKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uVGV4dDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIGNvbnN0IHBvcHVwUHJldmlldyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbFByZXZpZXdfX2ltYWdlXCJcclxuICAgICk7XHJcbiAgICBjb25zdCBwb3B1cFByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbFByZXZpZXdfX3RpdGxlXCJcclxuICAgICk7XHJcblxyXG4gICAgcG9wdXBQcmV2aWV3LnNyYyA9IGxpbms7XHJcbiAgICBwb3B1cFByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBwb3B1cFByZXZpZXcuYWx0ID0gYFBob3RvIG9mICR7bmFtZX1gO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0QXZhdGFyKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoeyBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsidmFsaWRhdGlvblNldHRpbmdzIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkTGlzdEVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUVkaXRCdXR0b24iLCJtb2RhbEVkaXRQcm9maWxlRm9ybSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwib3BlbkVkaXRBdmF0YXIiLCJtb2RhbEVkaXRBdmF0YXIiLCJhZGRDYXJkTW9kYWwiLCJtb2RhbEFkZENhcmRGb3JtIiwibW9kYWxBZGRDYXJkQnRuIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkaXNhYmxlZCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsImRhdGEiLCJ1c2VySWQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsQ2xpY2siLCJfZGVmaW5lUHJvcGVydHkiLCJfZWxlbWVudCIsImxpa2VzIiwiX2xpa2VzIiwicmVuZGVyTGlrZXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZElkIiwiX2lkIiwiX3VzZXJJZCIsIl9vd25lcklkIiwib3duZXIiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlRGVsQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkSW1nIiwiX2hhbmRsZVByZXZpZXciLCJfY2FyZERlbEJ0biIsIl9saWtlQnRuIiwiX2lzTGlrZWQiLCJzb21lIiwibGlrZSIsIl9jYXJkQ291bnRlciIsImxlbmd0aCIsInJlbmRlckNhcmQiLCJjYXJkVGl0bGUiLCJzcmMiLCJhbHQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJiaW5kIiwiY2xvc2UiLCJfY2xvc2VCdG4iLCJfb3BlbkVkaXRBdmF0YXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheSIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJsb2FkaW5nQnV0dG9uVGV4dCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfcG9wdXBGb3JtIiwiX2Zvcm1JbnB1dHMiLCJfc3VibWl0QnRuIiwiX2J1dHRvblRleHQiLCJfbG9hZGluZ0J1dHRvblRleHQiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwic2hvd0xvYWRpbmciLCJoaWRlTG9hZGluZyIsInJlc2V0IiwiX2hhbmRsZVN1Ym1pdCIsInNlY3Rpb24iLCJpdGVtc0xpc3QiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2l0ZW1zTGlzdCIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsIml0ZW0iLCJuZXdJdGVtIiwicHJlcGVuZCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwidXBkYXRlUHJvZmlsZUluZm8iLCJhYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlQXZhdGFyIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiYWRkTmV3Q2FyZCIsImdldExpa2VzIiwiYWRkTGlrZXMiLCJjYXJkSWQiLCJyZW1vdmVMaWtlcyIsImRlbGV0ZUNhcmQiLCJnZXRBcHBJbmZvIiwiYWxsIiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImltYWdlUG9wdXAiLCJpc0xpa2VkIiwidXBkYXRlTGlrZXMiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImRlbFBvcHVwIiwic2V0U3VibWl0QWN0aW9uIiwicmVtb3ZlQ2FyZCIsImZpbmFsbHkiLCJjYXJkc1Jlc3BvbnNlIiwidXNlclJlc3BvbnNlIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsIlNlY3Rpb24iLCJhdmF0YXJGb3JtIiwiX3JlZjMiLCJlZGl0Rm9ybVBvcHVwIiwidGl0bGUiLCJzdWJ0aXRsZSIsImFkZEZvcm1Qb3B1cCIsIl9yZWYyIiwiYWN0aW9uIiwiX2hhbmRsZVN1Ym1pdENhbGxiYWNrIiwicG9wdXBQcmV2aWV3IiwicG9wdXBQcmV2aWV3VGl0bGUiLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfYWJvdXRFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJnZXRBdmF0YXIiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwib3BlblByb2ZpbGVFZGl0Rm9ybSJdLCJzb3VyY2VSb290IjoiIn0=