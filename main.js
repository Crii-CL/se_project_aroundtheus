!function(){"use strict";class e{constructor(e,t){var i,n,s;i=this,s=()=>this._inputList.every((e=>e.validity.valid)),(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="_checkFormValidity"))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._formElement.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtonState()}))})),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this.setEventListeners()}}function t(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class i{constructor(e,i,n){t(this,"_handleDelCard",(()=>{this._element.remove(),this._element=null})),t(this,"_handleLikeBtn",(()=>{this._likeBtn.classList.toggle("card__like-button_active")})),this._name=e.name,this._link=e.link,this._handleImageClick=n,this._cardSelector=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}setEventListeners(){this._cardImg.addEventListener("click",(()=>this._handlePreview())),this._cardDelBtn.addEventListener("click",this._handleDelCard),this._likeBtn.addEventListener("click",this._handleLikeBtn)}_handlePreview(){this._handleImageClick(this._name,this._link)}renderCard(){this._element=this._getTemplate(),this._likeBtn=this._element.querySelector(".card__like-button"),this._cardImg=this._element.querySelector(".card__image"),this._cardDelBtn=this._element.querySelector(".card__delete-button");const e=this._element.querySelector(".card__title");return this._cardImg.src=this._link,this._cardImg.alt=`Photo of ${this._name}`,e.textContent=this._name,this.setEventListeners(),this._element}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeBtn=this._popupElement.querySelector(".modal__close"),this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlay=this._handleOverlay.bind(this)}open(){this._popupElement.classList.add("modal_opened"),this.setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this.removeEventListeners()}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlay(e){e.target.classList.contains("modal_opened")&&this.close()}setEventListeners(){document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleOverlay),this._closeBtn.addEventListener("click",this.close)}removeEventListeners(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleOverlay),this._closeBtn.removeEventListener("click",this.close)}}class s extends n{constructor(e,t){var i,n,s;super({popupSelector:e}),i=this,s=e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="_handleSubmit"))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,this._popupForm=this._popupElement.querySelector(".modal__form"),this._formInputs=this._popupForm.querySelectorAll(".modal__form-input"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}close(){this._popupForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleSubmit)}removeEventListeners(){super.removeEventListeners(),this._popupForm.removeEventListener("submit",this._handleSubmit)}}const r={inputSelector:".modal__form-input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__form-button_inactive",inputErrorClass:"modal__form-input_error",errorClass:"modal__error_visible"},o=document.querySelector(".cards__list"),l=document.querySelector("#profile-edit-button"),a=document.querySelector("#modal-profile-form"),c=document.querySelector("#modal-edit-title-input"),d=document.querySelector("#modal-edit-subtitle-input"),u=document.querySelector("#modal-add-card"),m=document.querySelector("#modal-add-card-form"),h=document.querySelector("#profile-add-card-button");function _(e){const t=new i(e,"#card-template",p).renderCard();o.prepend(t)}function p(e,t){b.open(e,t)}l.addEventListener("click",(()=>{!function(){const{name:e,description:t}=S.getUserInfo();c.value=e,d.value=t,E.open()}()})),h.addEventListener("click",(()=>{y.open(u)})),new class{constructor(e,t){let{items:i,renderer:n}=e;this._items=i,this._renderer=n,this._itemsList=t}renderItems(){this._items.forEach(this._renderer)}addItem(e){const t=this._renderer(e);this._itemsList.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:_},o).renderItems();const v=new e(r,a),f=new e(r,m);v.enableValidation(),f.enableValidation();const E=new s("#modal-edit-profile",(function(e){S.setUserInfo({name:e.title,description:e.subtitle})})),y=new s("#modal-add-card",(function(e){_({name:e.name,link:e.link}),y.close()})),b=new class extends n{open(e,t){const i=this._popupElement.querySelector(".modalPreview__image"),n=this._popupElement.querySelector(".modalPreview__title");i.src=t,n.textContent=e,i.alt=`Photo of ${e}`,super.open()}}({popupSelector:"#modal-preview"}),S=new class{constructor(e){let{nameSelector:t,descriptionSelector:i}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(i)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:i}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=i}}({nameSelector:"#profile-title",descriptionSelector:"#profile-subtitle"})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0JBQXNCN0UsU0FBU3BDLGNBQWMrRyxFQUNwRCxDQUVBdEIsY0FDRSxNQUFPLENBQ0wzRCxLQUFNbEQsS0FBS29JLGFBQWFoRyxZQUN4QnVFLFlBQWEzRyxLQUFLcUksb0JBQW9CakcsWUFFMUMsQ0FFQXlGLFlBQVdTLEdBQXdCLElBQXZCLEtBQUVwRixFQUFJLFlBQUV5RCxHQUFhMkIsRUFDL0J0SSxLQUFLb0ksYUFBYWhHLFlBQWNjLEVBQ2hDbEQsS0FBS3FJLG9CQUFvQmpHLFlBQWN1RSxDQUN6QyxHSDZFbUMsQ0FDbkN1QixhQUFjLGlCQUNkQyxvQkFBcUIscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy8gX3NldEV2ZW50TGlzdGVuZXJzIGluIHRoZSBjbGFzc1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGNvbnN0IGlzRm9ybVZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcclxuXHJcbiAgICBpZiAoIWlzRm9ybVZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2NoZWNrRm9ybVZhbGlkaXR5ID0gKCkgPT5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG5cclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZVByZXZpZXcoKSk7XHJcbiAgICB0aGlzLl9jYXJkRGVsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxDYXJkKTtcclxuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdG4pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbENhcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUxpa2VCdG4gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZVByZXZpZXcoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkRGVsQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICBjb25zdCBjYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltZy5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltZy5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgICB0aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVPdmVybGF5ID0gdGhpcy5faGFuZGxlT3ZlcmxheS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZU92ZXJsYXkoZSkge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXkpO1xyXG4gICAgdGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5KTtcclxuICAgIHRoaXMuX2Nsb3NlQnRuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlU3VibWl0ID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB0aGlzLmNsb3NlKCk7XHJcbiAgfTtcclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2Zvcm0tYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0X2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHsgaW5pdGlhbENhcmRzLCB2YWxpZGF0aW9uU2V0dGluZ3MgfTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDYXJkIEVsZW1lbnRzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQcm9maWxlIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgbW9kYWxFZGl0UHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXByb2ZpbGUtZm9ybVwiKTtcclxuY29uc3QgbW9kYWxFZGl0VGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZWRpdC10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgbW9kYWxFZGl0U3VidGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWwtZWRpdC1zdWJ0aXRsZS1pbnB1dFwiXHJcbik7XHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEFkZCBDYXJkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtYWRkLWNhcmRcIik7XHJcbmNvbnN0IG1vZGFsQWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWFkZC1jYXJkLWZvcm1cIik7XHJcbmNvbnN0IHByb2ZpbGVBZGRDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1jYXJkLWJ1dHRvblwiKTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3BlblByb2ZpbGVFZGl0Rm9ybSgpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRDYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVBvcHVwLm9wZW4oYWRkQ2FyZE1vZGFsKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRFZGl0UHJvZmlsZShpbnB1dFZhbHVlcykge1xyXG4gIHVzZXJJbmZvRWxlbWVudC5zZXRVc2VySW5mbyh7XHJcbiAgICBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSxcclxuICAgIGRlc2NyaXB0aW9uOiBpbnB1dFZhbHVlcy5zdWJ0aXRsZSxcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3VibWl0QWRkQ2FyZChpbnB1dFZhbHVlcykge1xyXG4gIHJlbmRlckNhcmQoeyBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLCBsaW5rOiBpbnB1dFZhbHVlcy5saW5rIH0sIGNhcmRMaXN0RWwpO1xyXG4gIGFkZEZvcm1Qb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuUHJvZmlsZUVkaXRGb3JtKCkge1xyXG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvRWxlbWVudC5nZXRVc2VySW5mbygpO1xyXG4gIG1vZGFsRWRpdFRpdGxlSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIG1vZGFsRWRpdFN1YnRpdGxlSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcclxuICBlZGl0Rm9ybVBvcHVwLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2tcclxuICApLnJlbmRlckNhcmQoKTtcclxuICBjYXJkTGlzdEVsLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBpbWFnZVBvcHVwLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTZWN0aW9uLmpzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IHNlY3Rpb25FbGVtZW50ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG4gIH0sXHJcbiAgY2FyZExpc3RFbFxyXG4pO1xyXG5zZWN0aW9uRWxlbWVudC5yZW5kZXJJdGVtcygpO1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEZvcm1WYWxpZGF0b3IuanMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBtb2RhbEVkaXRQcm9maWxlRm9ybVxyXG4pO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIG1vZGFsQWRkQ2FyZEZvcm1cclxuKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBwb3B1cHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuY29uc3QgZWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI21vZGFsLWVkaXQtcHJvZmlsZVwiLFxyXG4gIHN1Ym1pdEVkaXRQcm9maWxlXHJcbik7XHJcbmNvbnN0IGFkZEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI21vZGFsLWFkZC1jYXJkXCIsIHN1Ym1pdEFkZENhcmQpO1xyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHsgcG9wdXBTZWxlY3RvcjogXCIjbW9kYWwtcHJldmlld1wiIH0pO1xyXG5jb25zdCB1c2VySW5mb0VsZW1lbnQgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS10aXRsZVwiLFxyXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiI3Byb2ZpbGUtc3VidGl0bGVcIixcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGl0ZW1zTGlzdCkge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9pdGVtc0xpc3QgPSBpdGVtc0xpc3Q7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICBjb25zdCBuZXdJdGVtID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB0aGlzLl9pdGVtc0xpc3QucHJlcGVuZChuZXdJdGVtKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIGNvbnN0IHBvcHVwUHJldmlldyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbFByZXZpZXdfX2ltYWdlXCJcclxuICAgICk7XHJcbiAgICBjb25zdCBwb3B1cFByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbFByZXZpZXdfX3RpdGxlXCJcclxuICAgICk7XHJcblxyXG4gICAgcG9wdXBQcmV2aWV3LnNyYyA9IGxpbms7XHJcbiAgICBwb3B1cFByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBwb3B1cFByZXZpZXcuYWx0ID0gYFBob3RvIG9mICR7bmFtZX1gO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJzZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkaXNhYmxlZCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX2RlZmluZVByb3BlcnR5IiwiX2VsZW1lbnQiLCJfbGlrZUJ0biIsInRvZ2dsZSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkSW1nIiwiX2hhbmRsZVByZXZpZXciLCJfY2FyZERlbEJ0biIsIl9oYW5kbGVEZWxDYXJkIiwiX2hhbmRsZUxpa2VCdG4iLCJyZW5kZXJDYXJkIiwiY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdG4iLCJvcGVuIiwiYmluZCIsImNsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2hhbmRsZU92ZXJsYXkiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsImtleSIsInRhcmdldCIsImNvbnRhaW5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9wb3B1cEZvcm0iLCJfZm9ybUlucHV0cyIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJyZXNldCIsIl9oYW5kbGVTdWJtaXQiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJjYXJkTGlzdEVsIiwicHJvZmlsZUVkaXRCdXR0b24iLCJtb2RhbEVkaXRQcm9maWxlRm9ybSIsIm1vZGFsRWRpdFRpdGxlSW5wdXQiLCJtb2RhbEVkaXRTdWJ0aXRsZUlucHV0IiwiYWRkQ2FyZE1vZGFsIiwibW9kYWxBZGRDYXJkRm9ybSIsInByb2ZpbGVBZGRDYXJkQnRuIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsInByZXBlbmQiLCJpbWFnZVBvcHVwIiwiZGVzY3JpcHRpb24iLCJ1c2VySW5mb0VsZW1lbnQiLCJnZXRVc2VySW5mbyIsImVkaXRGb3JtUG9wdXAiLCJvcGVuUHJvZmlsZUVkaXRGb3JtIiwiYWRkRm9ybVBvcHVwIiwiaXRlbXNMaXN0IiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9pdGVtc0xpc3QiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJpdGVtIiwibmV3SXRlbSIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInNldFVzZXJJbmZvIiwidGl0bGUiLCJzdWJ0aXRsZSIsInBvcHVwUHJldmlldyIsInBvcHVwUHJldmlld1RpdGxlIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfcmVmMiJdLCJzb3VyY2VSb290IjoiIn0=